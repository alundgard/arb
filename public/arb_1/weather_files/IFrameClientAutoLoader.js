/*! cnn-video-loader 1.3.7 2015-05-11 */
var CNNVIDEOAPI=window.CNNVIDEOAPI||{};CNNVIDEOAPI.apiBaseUrl="http://z.cdn.turner.com/cnn/.element/widget/video/videoapi/api/",CNNVIDEOAPI.apiMappingFile="/config/apimapping.json",CNNVIDEOAPI.bootstrapperFile="/js/CNNVideoBootstrapper.js",CNNVIDEOAPI.currentVersion=null,CNNVIDEOAPI.client="default",CNNVIDEOAPI.deviceType="desktop",CNNVIDEOAPI.configPaths={desktop:"{hostandbasepath}{version}/config/{site}/{profile}/{section}sectionconfig.json",tablet:"{hostandbasepath}{version}/config/{site}/{profile}/{section}sectionconfig.json",phone:"{hostandbasepath}{version}/config/{site}/{profile}/{section}sectionconfig.json","default":"{hostandbasepath}{version}/config/{site}/{profile}/sectionconfig.json"},CNNVIDEOAPI.Utils={tmpl:function(format,tokens){var re=/\{\{([^{\}]+)\}\}/g;return(format+"").replace(re,function(placeholder,token){return token in(tokens||{})?/^f/.test(typeof tokens[token])?tokens[token]():tokens[token]:placeholder})},copyObjectProperty:function(receivingObj,origObj,copyFromObj,propertyName){receivingObj=receivingObj!==void 0?receivingObj:{};var tempVal=origObj[propertyName];return copyFromObj!==void 0&&copyFromObj[propertyName]!==void 0&&(tempVal=copyFromObj[propertyName]),tempVal!==void 0&&(receivingObj[propertyName]=tempVal),receivingObj},createStylesheet:function(styleText){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=styleText:style.appendChild(document.createTextNode(styleText)),head.appendChild(style)},eventLogger:function(data){window.debugMsg(data)},getPlayerType:function(agent){return/\b(Kindle|Fire|Silk|Android|IEMobile)\b/gi.test(agent)?CVP.HTML5:CVP.FLASH},getEditionURL:function(cookie){var parent_url=decodeURIComponent(document.location.hash.replace(/^#/,""));if(parent_url)return parent_url;var edition="www",matches=/SelectedEdition=(www|edition);/.exec(cookie);return null!==matches&&matches.length&&matches[1].length&&(edition=matches[1]),/((www|edition|us)\.)?(preview\.)?((dev|ref|train|cnnpreview)\.)cnn\.com(:(82|94|80))?/.test(document.location.host)?"http://"+document.location.host:"http://"+edition+".cnn.com"},generateWindowVariables:function(varNameStr,value,overwriteExisting){overwriteExisting=overwriteExisting?overwriteExisting:!0;var nmToCreate="",finalVarName="";if("string"==typeof varNameStr){var tmpArray=varNameStr.split(".");if(tmpArray.length>1){finalVarName=tmpArray.pop(),nmToCreate=tmpArray.join(".");var impl=this.createNamespaceFromString(nmToCreate);!impl[finalVarName]||overwriteExisting?impl[finalVarName]=value:window.debugMsg("Variable '"+varNameStr+"' already exists. Will not set.")}else!window[varNameStr]||overwriteExisting?window[varNameStr]=value:window.debugMsg("Variable '"+varNameStr+"' already exists. Will not set.")}},createNamespaceFromString:function(name,separator,container){var i,len,ns=name.split(separator||"."),o=container||window;for(i=0,len=ns.length;len>i;i++)o=o[ns[i]]=o[ns[i]]||{};return o},deserializeJSONData:function(data){if(null===data||""===data)return null;if("object"!=typeof data)try{data=window.JSON.parse(data)}catch(err){data=jQuery.deparam(data)}return data},getContextByName:function(contexts,videoConfig){try{var contextToFind=videoConfig.context;return contexts[contextToFind]?contexts[contextToFind]:(window.warnMsg("Could not find context '"+contextToFind+"'. Will use the 'default' context. Please check your configuration. \nVideo Configuration for missing context is:\nnetwork:'"+videoConfig.network+"'\nprofile:'"+videoConfig.profile+"' \nsection'"+videoConfig.section+"'\n"),contexts["default"])}catch(err){return{}}},getDefaultContext:function(contexts){try{return contexts["default"]}catch(err){return{}}},getTestFromString:function(str){var evaled=eval(str);return void 0===evaled?!1:evaled},getQueryStringParameter:function(queryStringKey){try{for(var query=location.search.replace("?",""),values=query.split("&"),i=0;values.length>i;i++){var vals=values[i],arg=vals.split("="),key=arg[0],val=arg[1];if(key.replace(" ","")===queryStringKey)return val}}catch(error){}},getDebug:function(){try{for(var query=location.search.replace("?",""),values=query.split("&"),i=0;values.length>i;i++){var vals=values[i],arg=vals.split("="),key=arg[0],val=arg[1];"debug"===key.replace(" ","")&&(window.debugMode=val)}}catch(error){}},getVersion:function(){if(!CNNVIDEOAPI.currentVersion){try{for(var script_tag=document.getElementById("cnnAPIJS"),query=script_tag.src.replace(/^[^\?]+\??/,""),values=query.split("&"),i=0;values.length>i;i++){var vals=values[i],arg=vals.split("="),key=arg[0],val=arg[1];if("version"===key.replace(" ",""))return val}}catch(error){}return"latest"}return CNNVIDEOAPI.currentVersion}},function(){function getVersionFromQueryString(){var retVal="latest";try{for(var script_tag=location.search,query=script_tag.replace(/^[^\?]+\??/,""),values=query.split("&"),i=0;values.length>i;i++){var vals=values[i],arg=vals.split("="),key=arg[0].replace(" ","").replace("?",""),val=arg[1];queryStringArgs[key]=val,"apiVersion"===key&&(retVal=val)}}catch(error){}return retVal}function getClientFromQueryString(){var retVal="default";try{for(var script_tag=location.search,query=script_tag.replace(/^[^\?]+\??/,""),values=query.split("&"),i=0;values.length>i;i++){var vals=values[i],arg=vals.split("="),key=arg[0].replace(" ","").replace("?",""),val=arg[1];queryStringArgs[key]=val,"client"===key&&(retVal=val)}}catch(error){}return retVal}function onDependenciesLoadComplete(){window.cnn_onSectionConfigLoadComplete=null;var utils=CNNVIDEOAPI.Utils,parent_url=decodeURIComponent(document.location.hash.replace(/^#/,""));loadFromURL(parent_url),window.framePath=utils.getEditionURL(document.cookie);var tmp=decodeURIComponent(document.location.hash.substring(1));/^http\:\/\/[^\/]+\b(cnn)\.com/.test(tmp)&&(window.framePath=tmp),window.attachEvent?window.attachEvent("onmessage",receiver):window.addEventListener("message",receiver,!1),jQuery.postMessage({action:"windowready",name:window.frameName},parent_url,parent)}function loadFromURL(parentUrl){for(var data={cnn_metadata:window.cnn_metadata,pageUrl:parentUrl},obj=jQuery.deparam(location.search.replace("?","")),i=0,l=VideoPlayer.URL_PROPERTIES.length;l>i;i++){var properties=VideoPlayer.URL_PROPERTIES[i].split("|");obj.hasOwnProperty(properties[0])&&(data[properties[1]]=obj[properties[0]])}return data.videoConfig=obj,setupPage(data),data}function setupPage(data){data.cnn_metadata&&(window.cnn_metadata=data.cnn_metadata),window.pageUrl=data.pageUrl,window.frameName=data.name,window.debugMode=data.videoConfig.hasOwnProperty("debug")?data.videoConfig.debug:!1,load(data.videoConfig)}function load(obj){obj.markupid="cnnCVP1",obj.markupId="cnnCVP1",obj.key=obj.key||"cnnCVP1",callCnnVideo(obj)}function callCnnVideo(obj){var configObj={eventsCallback:{},overridesConfig:{},videoConfig:obj},cType=queryStringArgs.type,contextObj=window.SECTION_CONTEXTS[cType],iFramePlayer=new CNNVIDEOAPI.CNNEmbeddedVideoPlayer(configObj,contextObj),handler=new CNNVIDEOAPI.CVPEventPostMessageDispatcher(iFramePlayer,iFramePlayer,configObj.videoConfig);iFramePlayer.addEventHandler(handler),window.CNNVIDEO=iFramePlayer}function CNNVideoAPILoadComplete(){window.SECTION_CONTEXTS=window.SECTION_CONTEXTS?window.SECTION_CONTEXTS:{},CNNVIDEOAPI.Utils;var section=queryStringArgs.section?queryStringArgs.section:"default";section=section.replace(/-/g,"");var path=getSectionConfigPath(queryStringArgs.network,queryStringArgs.profile,section);path&&(window[section+"SectionConfigLoadComplete"]=function(data){var callback=onDependenciesLoadComplete,deps=[],apiDependencies=CNNVIDEOAPI.apiMapping||{},depArrayNames=[""],cType=queryStringArgs.type;if(window.SECTION_CONTEXTS[cType]=data,cType){var depName=cType+"_dependencies";if(0>jQuery.inArray(depName)){depArrayNames.push(depName);var typeDep=apiDependencies[cType+"_dependencies"];typeDep&&jQuery.merge(deps,typeDep)}}CNNVIDEOAPI.DependencyManager.loadDependency(deps,callback)},CNNVIDEOAPI.DependencyManager.loadJSON(path))}function getSectionConfigPath(site,profile,section){var path,devicePath="";return window.Modernizr!==void 0&&window.Modernizr.mobile&&(CNNVIDEOAPI.deviceType=window.Modernizr.phone?"phone":"tablet"),devicePath=CNNVIDEOAPI.configPaths[CNNVIDEOAPI.deviceType],section&&""!==section?(section=section.replace(/-/g,""),path=devicePath):(window.warnMsg("CNNVideoManager.renderMultipleContainers: You did not specify an explicit 'section' value. The 'default' section will be used. If this isn't the behavior you expected, please check your configuration/setup for this player"),section="default",path=devicePath),path=path.replace("{hostandbasepath}",CNNVIDEOAPI.apiBaseUrl).replace("{version}",CNNVIDEOAPI.Utils.getVersion()).replace("{section}",section?section:"").replace("{site}",site).replace("{profile}",profile)}function resize(width,height){width&&(jQuery("body").width(width),jQuery("#cnnCVP1").width(width),jQuery("#cnnCVP1").children().first().width(width)),height&&(jQuery("body").height(height),jQuery("#cnnCVP1").height(height),jQuery("#cnnCVP1").children().first().height(height));try{window.CNNVIDEO&&window.CNNVIDEO.resize&&window.CNNVIDEO.resize(width,height)}catch(e){}}function onload(e,data){window.messageSource=e.source,window.CNNVIDEO&&window.CNNVIDEO.play?window.CNNVIDEO.play(data.video.video,data.video.videoOverrides):setupPage(data)}function unhandledAction(){}function distributor(e,data){if(data.action){var handler;handler="play"===data.action?onload:-1!==VideoPlayer.CVP_METHODS.indexOf(data.action)?oncvpproxycall:unhandledAction;try{handler.call(this,e,data)}catch(error){window.errorMsg&&window.errorMsg(e)}}}function receiver(e){var data;if("object"!=typeof e.data)try{data=window.JSON.parse(e.data)}catch(err){data=jQuery.deparam(e.data)}else data="object"==typeof e.data?e.data:jQuery.deparam(e.data);distributor(e,data)}function oncvpproxycall(e,data){var action=data.action,args=data.data,method=window.CNNVIDEO[action];"resize"===action&&resize.apply(this,args||[]),method?method.apply(window.CNNVIDEO,args||[]):window.debugMsg("method not found: "+action+"in IFrameClientAutoLoader")}var queryStringArgs={};window.CNNVideoAPILoadComplete=CNNVideoAPILoadComplete;var tag=document.createElement("script");CNNVIDEOAPI.currentVersion=getVersionFromQueryString(),CNNVIDEOAPI.client=getClientFromQueryString(),tag.src="http://www.cnn.com/.element/widget/video/videoapi/api/js/cnn_video_api.js?version="+CNNVIDEOAPI.currentVersion+"&client="+CNNVIDEOAPI.client,tag.id="cnnAPIJS";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}(window);